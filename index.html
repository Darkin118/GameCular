<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GameCular</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Gowun+Batang:wght@400;700&family=Noto+Sans+KR:wght@400;600;700&display=swap" rel="stylesheet">
<style>
body {
    font-family: 'Noto Sans KR', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    background: 
        radial-gradient(ellipse at top, #1a0033 0%, transparent 50%),
        radial-gradient(ellipse at bottom, #0d1b2a 0%, transparent 50%),
        linear-gradient(to bottom, #0a0e27 0%, #1b1b3a 50%, #0f0c29 100%);
    min-height: 100vh;
    margin: 0;
    padding: 0;
    display: grid;
    grid-template-columns: 350px 1fr;
    position: relative;
    overflow-x: hidden;
}

body::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-image: 
        radial-gradient(2px 2px at 20% 30%, white, transparent),
        radial-gradient(2px 2px at 60% 70%, white, transparent),
        radial-gradient(1px 1px at 50% 50%, white, transparent),
        radial-gradient(1px 1px at 80% 10%, white, transparent),
        radial-gradient(2px 2px at 90% 60%, white, transparent),
        radial-gradient(1px 1px at 33% 80%, white, transparent),
        radial-gradient(1px 1px at 15% 90%, white, transparent);
    background-size: 200% 200%;
    background-position: 0% 0%;
    animation: stars 60s linear infinite;
    pointer-events: none;
    opacity: 0.5;
    z-index: 0;
}

@keyframes stars {
    0% { background-position: 0% 0%; }
    100% { background-position: 100% 100%; }
}

@media (max-width: 1024px) {
    body {
        grid-template-columns: 1fr;
    }
}

.sidebar {
    background: rgba(10, 14, 39, 0.85);
    backdrop-filter: blur(10px);
    padding: 40px 30px;
    box-shadow: 4px 0 30px rgba(138, 43, 226, 0.3);
    overflow-y: auto;
    border-right: 1px solid rgba(138, 43, 226, 0.3);
    position: relative;
    z-index: 1;
}

.sidebar h3 {
    color: #e0b0ff;
    font-size: 1.3rem;
    margin: 0 0 20px 0;
    font-weight: 700;
    border-bottom: 3px solid #9d4edd;
    padding-bottom: 10px;
    text-shadow: 0 0 10px rgba(157, 78, 221, 0.5);
}

.sidebar .name {
    font-weight: 700;
    color: #ffffff;
    font-size: 1.8rem;
    margin-bottom: 15px;
    text-shadow: 0 0 20px rgba(224, 176, 255, 0.6);
}

.sidebar .info-section {
    margin: 25px 0;
}

.sidebar .info-section h4 {
    color: #c77dff;
    font-size: 1rem;
    margin-bottom: 10px;
    font-weight: 600;
}

.sidebar p {
    color: #b8b8d0;
    font-size: 0.95rem;
    line-height: 1.7;
    margin: 8px 0;
}

.sidebar .highlight {
    color: #e0b0ff;
    font-weight: 600;
}

.sidebar .badge {
    display: inline-block;
    background: linear-gradient(135deg, #9d4edd 0%, #7209b7 100%);
    color: white;
    padding: 6px 12px;
    border-radius: 20px;
    font-size: 0.85rem;
    margin: 5px 5px 5px 0;
    box-shadow: 0 0 15px rgba(157, 78, 221, 0.4);
}

.main-content {
    padding: 60px 80px;
    overflow-y: auto;
    max-width: 1400px;
    margin: 0 auto;
    position: relative;
    z-index: 1;
}

@media (max-width: 1024px) {
    .sidebar {
        padding: 30px 20px;
    }
    
    .main-content {
        padding: 40px 30px;
    }
}

.container{
    background-color: transparent;
    padding: 0;
    border-radius: 0;
    box-shadow: none;
    width: 100%;
    max-width: 100%;
    margin: 0;
}

h1 {
    font-family: 'Gowun Batang', serif;
    color: #ffffff;
    margin-bottom: 4rem;
    font-size: 3rem;
    font-weight: 700;
    letter-spacing: 3px;
    text-align: center;
    text-shadow: 0 0 30px rgba(157, 78, 221, 0.8), 0 0 60px rgba(138, 43, 226, 0.5);
}

.survey-container {
    display: flex;
    flex-direction: column;
    gap: 120px;
    margin-bottom: 80px;
    width: 100%;
    padding: 30px 0;
}

fieldset {
    border: 2px solid rgba(157, 78, 221, 0.6);
    margin: 0;
    padding: 0;
    background: rgba(20, 20, 50, 0.7);
    backdrop-filter: blur(10px);
    border-radius: 15px;
    text-align: left;
    box-shadow: 0 8px 32px rgba(157, 78, 221, 0.3), 0 0 80px rgba(138, 43, 226, 0.1);
    transition: all 0.3s;
    overflow: hidden;
}

fieldset:hover {
    border-color: rgba(199, 125, 255, 0.8);
    box-shadow: 0 12px 40px rgba(157, 78, 221, 0.5), 0 0 100px rgba(138, 43, 226, 0.3);
    transform: translateY(-5px);
}

.question-header {
    background: linear-gradient(135deg, rgba(157, 78, 221, 0.9) 0%, rgba(114, 9, 183, 0.9) 100%);
    padding: 25px 35px;
    color: white;
    position: relative;
}

.question-header::before {
    content: 'ğŸ”­';
    position: absolute;
    right: 30px;
    top: 50%;
    transform: translateY(-50%);
    font-size: 2rem;
    opacity: 0.3;
}

legend {
    font-weight: 600;
    color: white;
    padding: 0;
    font-size: 1.1rem;
    line-height: 1.5;
    margin: 0;
    float: none;
    width: 100%;
    text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
}

.question-desc {
    color: rgba(255, 255, 255, 0.85);
    font-size: 0.9rem;
    line-height: 1.6;
    margin: 8px 0 0 0;
}

.question-content {
    padding: 30px 35px;
    background: rgba(10, 10, 30, 0.5);
}

.radio-group {
    display: flex;
    justify-content: space-between;
    gap: 12px;
}

.radio-group label {
    flex: 1;
    text-align: center;
    cursor: pointer;
    padding: 12px 10px;
    border: 2px solid rgba(157, 78, 221, 0.4);
    border-radius: 10px;
    transition: all 0.3s;
    color: #b8b8d0;
    font-size: 0.9rem;
    line-height: 1.3;
    background: rgba(20, 20, 50, 0.5);
}

.radio-group label:hover {
    border-color: #c77dff;
    background-color: rgba(157, 78, 221, 0.2);
    box-shadow: 0 0 20px rgba(157, 78, 221, 0.4);
}

.radio-group input[type="radio"]:checked + span {
    color: #ffffff;
}

.radio-group label:has(input[type="radio"]:checked) {
    background: linear-gradient(135deg, rgba(157, 78, 221, 0.8) 0%, rgba(114, 9, 183, 0.8) 100%);
    border-color: #9d4edd;
    color: white;
    box-shadow: 0 0 30px rgba(157, 78, 221, 0.6);
}

.radio-group input[type="radio"] {
    cursor: pointer;
    accent-color: #9d4edd;
}

.radio-group label:hover {
    background-color: rgba(52, 152, 219, 0.1);
}

.radio-group input[type="radio"]:checked + span {
    color: #3498db;
    font-weight: 700;
}

.radio-group label {
    position: relative;
}

.radio-group input[type="radio"] {
    cursor: pointer;
    accent-color: #3498db;
}

#recommend-btn {
    background: linear-gradient(135deg, rgba(157, 78, 221, 0.9) 0%, rgba(114, 9, 183, 0.9) 100%);
    color: #ffffff;
    border: 2px solid rgba(199, 125, 255, 0.5);
    padding: 20px 50px;
    font-size: 1.3rem;
    font-weight: 700;
    border-radius: 35px;
    cursor: pointer;
    transition: all 0.3s;
    margin-top: 40px;
    width: 100%;
    box-shadow: 0 8px 30px rgba(157, 78, 221, 0.5), 0 0 60px rgba(138, 43, 226, 0.3);
    text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
}

#recommend-btn:hover:not(:disabled) {
    transform: translateY(-3px);
    box-shadow: 0 12px 40px rgba(157, 78, 221, 0.7), 0 0 80px rgba(138, 43, 226, 0.5);
    background: linear-gradient(135deg, rgba(199, 125, 255, 0.9) 0%, rgba(157, 78, 221, 0.9) 100%);
    border-color: #e0b0ff;
}

#recommend-btn:disabled {
    opacity: 0.6;
    cursor: not-allowed;
}

#status-message {
    margin: 30px 0;
    padding: 20px 30px;
    border-radius: 15px;
    font-size: 1rem;
    font-weight: 500;
    box-shadow: 0 4px 15px rgba(0,0,0,0.08);
}

#status-message.info {
    background-color: rgba(157, 78, 221, 0.2);
    color: #e0b0ff;
    border-left: 4px solid #9d4edd;
    backdrop-filter: blur(10px);
}

#status-message.error {
    background-color: rgba(255, 107, 107, 0.2);
    color: #ffcccc;
    border-left: 4px solid #e74c3c;
    backdrop-filter: blur(10px);
}

#result-area {
    padding: 40px;
    border: 2px solid rgba(157, 78, 221, 0.5);
    border-radius: 20px;
    background: rgba(20, 20, 50, 0.7);
    backdrop-filter: blur(10px);
    margin-top: 40px;
    box-shadow: 0 8px 32px rgba(157, 78, 221, 0.3), 0 0 80px rgba(138, 43, 226, 0.2);
}

.game-thumbnail {
    margin-bottom: 25px;
}

.game-thumbnail img {
    width: 100%;
    max-width: 600px;
    height: 350px;
    object-fit: cover;
    border-radius: 15px;
    box-shadow: 0 8px 30px rgba(157, 78, 221, 0.4);
    border: 2px solid rgba(199, 125, 255, 0.3);
}

.game-info h2 {
    color: #e0b0ff;
    margin: 20px 0 15px 0;
    font-size: 2rem;
    text-shadow: 0 0 20px rgba(157, 78, 221, 0.6);
}

.game-info p {
    margin: 12px 0;
    color: #b8b8d0;
    font-size: 1.05rem;
}

.rating {
    display: inline-block;
    background: linear-gradient(135deg, #f39c12 0%, #e67e22 100%);
    color: white;
    padding: 8px 18px;
    border-radius: 20px;
    font-weight: 700;
    margin: 15px 0;
    font-size: 1.1rem;
    box-shadow: 0 4px 15px rgba(243, 156, 18, 0.4);
}

.platforms {
    display: flex;
    gap: 10px;
    justify-content: center;
    flex-wrap: wrap;
    margin-top: 15px;
}

.platform-tag {
    background: linear-gradient(135deg, rgba(157, 78, 221, 0.3) 0%, rgba(114, 9, 183, 0.3) 100%);
    padding: 8px 16px;
    border-radius: 15px;
    font-size: 0.9rem;
    color: #e0b0ff;
    font-weight: 500;
    border: 1px solid rgba(199, 125, 255, 0.4);
}

.hidden {
    display: none;
}

.footer {
    margin-top: 50px;
    padding-top: 30px;
    border-top: 2px solid rgba(157, 78, 221, 0.3);
    text-align: center;
}

small {
    display: block;
    margin-top: 15px;
    font-size: 0.95rem;
    color: #b8b8d0;
    font-weight: 500;
}
</style>
</head>
<body>
    <!-- ì¢Œì¸¡ ì‚¬ì´ë“œë°” í”„ë¡œí•„ -->
    <aside class="sidebar">
        <h3>ğŸ‘¨â€ğŸ’» Developer</h3>
        <p class="name">ìœ¤ì¸ì„±</p>
        
        <div class="info-section">
            <h4>ğŸ“ Education</h4>
            <p>
                <span class="highlight">ì„œìš¸ì‚¬ì´ë²„ëŒ€í•™êµ</span><br>
                ë¹…ë°ì´í„°Â·ì •ë³´ë³´í˜¸í•™ê³¼ ì¬í•™
            </p>
        </div>
        
        <div class="info-section">
            <h4>ğŸ’¡ About This Project</h4>
            <p>
                AWS í´ë¼ìš°ë“œ ì„œë¹„ìŠ¤ë¥¼ í™œìš©í•œ ì²« í¬íŠ¸í´ë¦¬ì˜¤ í”„ë¡œì íŠ¸ì…ë‹ˆë‹¤.
                êµìˆ˜ë‹˜ì˜ ê°•ì˜ë¥¼ ë“£ê³  ëŒ€í™”í˜• ì¸ê³µì§€ëŠ¥(Claude)ì˜ ë„ì›€ì„ ë°›ì•„ ì œì‘í–ˆìŠµë‹ˆë‹¤.
            </p>
        </div>
        
        <div class="info-section">
            <h4>ğŸ› ï¸ Tech Stack</h4>
            <span class="badge">HTML5</span>
            <span class="badge">CSS3</span>
            <span class="badge">JavaScript</span>
            <span class="badge">RAWG API</span>
            <span class="badge">AWS</span>
        </div>
        
        <div class="info-section">
            <h4>ğŸš€ Goals</h4>
            <p>
                ë¶€ì¡±í•œ ì ì€ ë§ì§€ë§Œ ì•ìœ¼ë¡œ ê³„ì†í•´ì„œ ë°°ìš°ê³  ê°œì„ í•´ ë‚˜ê°€ë©° 
                ë” ë‚˜ì€ ê°œë°œìë¡œ ì„±ì¥í•˜ê² ìŠµë‹ˆë‹¤!
            </p>
        </div>
    </aside>

    <!-- ë©”ì¸ ì»¨í…ì¸  -->
    <main class="main-content">
    <div class="container">
        <h1>ğŸ”­ GameCular</h1>

        <div class="survey-container">
        <form id="survey-form">
            <fieldset>
                <div class="question-header">
                    <legend>1. ë¹ ë¥´ê³  í™”ë ¤í•œ ì•¡ì…˜ì´ ìˆëŠ” ê²Œì„ì„ ì„ í˜¸í•˜ì‹œë‚˜ìš”?</legend>
                    <p class="question-desc">ë°•ì§„ê° ë„˜ì¹˜ëŠ” ì „íˆ¬, ìŠ¤ë¦´ ë„˜ì¹˜ëŠ” ì¶”ê²©ì „, í™”ë ¤í•œ ì „íˆ¬ ì•¡ì…˜ì„ ì¦ê¸°ì‹œë‚˜ìš”?</p>
                </div>
                <div class="question-content">
                    <div class="radio-group">
                        <label><input type="radio" name="q1" value="1"> <span>ì „í˜€<br>ì•„ë‹ˆë‹¤</span></label>
                        <label><input type="radio" name="q1" value="2"> <span>ì•„ë‹ˆë‹¤</span></label>
                        <label><input type="radio" name="q1" value="3" checked> <span>ë³´í†µ<br>ì´ë‹¤</span></label>
                        <label><input type="radio" name="q1" value="4"> <span>ê·¸ë ‡ë‹¤</span></label>
                        <label><input type="radio" name="q1" value="5"> <span>ë§¤ìš°<br>ê·¸ë ‡ë‹¤</span></label>
                    </div>
                </div>
            </fieldset>

            <fieldset>
                <div class="question-header">
                    <legend>2. ìƒˆë¡œìš´ ì¥ì†Œë¥¼ íƒí—˜í•˜ê³  ëª¨í—˜í•˜ëŠ” ê²Œì„ì´ ì¢‹ìœ¼ì‹ ê°€ìš”?</legend>
                    <p class="question-desc">ë¯¸ì§€ì˜ ì„¸ê³„ë¥¼ ë°œê²¬í•˜ê³ , ìˆ¨ê²¨ì§„ ë³´ë¬¼ì„ ì°¾ê³ , ê´‘í™œí•œ ë§µì„ ì—¬í–‰í•˜ëŠ” ê²ƒì„ ì¢‹ì•„í•˜ì‹œë‚˜ìš”?</p>
                </div>
                <div class="question-content">
                    <div class="radio-group">
                        <label><input type="radio" name="q2" value="1"> <span>ì „í˜€<br>ì•„ë‹ˆë‹¤</span></label>
                        <label><input type="radio" name="q2" value="2"> <span>ì•„ë‹ˆë‹¤</span></label>
                        <label><input type="radio" name="q2" value="3" checked> <span>ë³´í†µ<br>ì´ë‹¤</span></label>
                        <label><input type="radio" name="q2" value="4"> <span>ê·¸ë ‡ë‹¤</span></label>
                        <label><input type="radio" name="q2" value="5"> <span>ë§¤ìš°<br>ê·¸ë ‡ë‹¤</span></label>
                    </div>
                </div>
            </fieldset>

            <fieldset>
                <div class="question-header">
                    <legend>3. ë¨¸ë¦¬ë¥¼ ì¨ì•¼ í•˜ëŠ” ì „ëµì ì´ê³  ìŠ¤í† ë¦¬ê°€ ê¹Šì€ ê²Œì„ì„ ì›í•˜ì‹œë‚˜ìš”?</legend>
                    <p class="question-desc">ë³µì¡í•œ ì „ëµì„ ì„¸ìš°ê³ , ê¹Šì´ ìˆëŠ” ì´ì•¼ê¸°ì— ëª°ì…í•˜ë©°, ì‹ ì¤‘í•œ ê²°ì •ì„ ë‚´ë¦¬ëŠ” ê²ƒì„ ì¦ê¸°ì‹œë‚˜ìš”?</p>
                </div>
                <div class="question-content">
                    <div class="radio-group">
                        <label><input type="radio" name="q3" value="1"> <span>ì „í˜€<br>ì•„ë‹ˆë‹¤</span></label>
                        <label><input type="radio" name="q3" value="2"> <span>ì•„ë‹ˆë‹¤</span></label>
                        <label><input type="radio" name="q3" value="3" checked> <span>ë³´í†µ<br>ì´ë‹¤</span></label>
                        <label><input type="radio" name="q3" value="4"> <span>ê·¸ë ‡ë‹¤</span></label>
                        <label><input type="radio" name="q3" value="5"> <span>ë§¤ìš°<br>ê·¸ë ‡ë‹¤</span></label>
                    </div>
                </div>
            </fieldset>

            <fieldset>
                <div class="question-header">
                    <legend>4. ë¶€ë‹´ ì—†ì´ í¸ì•ˆí•˜ê²Œ ì¦ê¸¸ ìˆ˜ ìˆëŠ” ê²Œì„ì´ ì¢‹ìœ¼ì‹ ê°€ìš”?</legend>
                    <p class="question-desc">ëŠê¸‹í•œ ë¶„ìœ„ê¸°ì—ì„œ ìŠ¤íŠ¸ë ˆìŠ¤ ì—†ì´, ì—¬ìœ ë¡­ê²Œ ì¦ê¸°ë©° íë§í•  ìˆ˜ ìˆëŠ” ê²Œì„ì„ ì›í•˜ì‹œë‚˜ìš”?</p>
                </div>
                <div class="question-content">
                    <div class="radio-group">
                        <label><input type="radio" name="q4" value="1"> <span>ì „í˜€<br>ì•„ë‹ˆë‹¤</span></label>
                        <label><input type="radio" name="q4" value="2"> <span>ì•„ë‹ˆë‹¤</span></label>
                        <label><input type="radio" name="q4" value="3" checked> <span>ë³´í†µ<br>ì´ë‹¤</span></label>
                        <label><input type="radio" name="q4" value="4"> <span>ê·¸ë ‡ë‹¤</span></label>
                        <label><input type="radio" name="q4" value="5"> <span>ë§¤ìš°<br>ê·¸ë ‡ë‹¤</span></label>
                    </div>
                </div>
            </fieldset>
        </form>
        </div>

            <button type="button" id="recommend-btn">ì¶”ì²œ ë°›ê¸°</button>

        <div id="status-message" class="info">
            ê²Œì„ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...
        </div>

        <div id="result-area" class="hidden"></div>
        
        <div class="footer">
            <small>â€» RAWG APIë¥¼ í™œìš©í•œ ì‹¤ì‹œê°„ ê²Œì„ ì¶”ì²œ ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤</small>
        </div>
    </div>
    </main>

    <script>
let ALL_GAMES = [];
let RECOMMENDED_GAMES = []; // ì´ë¯¸ ì¶”ì²œí•œ ê²Œì„ ëª©ë¡
let isLoading = true;
const API_KEY = "d6756424932b4fe2b4092a1b64e6204f";
const RAWG_URL = `https://api.rawg.io/api/games?key=${API_KEY}&page_size=40&ordering=-rating`;

const MOOD_TO_GENRES = {
    action: ["Action", "Shooter", "Fighting"],
    adventure: ["Adventure", "Platformer"],
    story: ["RPG", "Strategy"],
    relax: ["Simulation", "Casual", "Puzzle", "Family"]
};

const MOOD_DESCRIPTIONS = {
    action: {
        emoji: "âš”ï¸",
        title: "ì•¡ì…˜ í—Œí„°",
        desc: "ì•„ë“œë ˆë‚ ë¦°ì´ ì†Ÿêµ¬ì¹˜ëŠ” ì „íˆ¬ë¥¼ ì›í•˜ì‹œëŠ”êµ°ìš”!"
    },
    adventure: {
        emoji: "ğŸ—ºï¸",
        title: "ëª¨í—˜ê°€",
        desc: "ë¯¸ì§€ì˜ ì„¸ê³„ë¥¼ íƒí—˜í•˜ê³  ì‹¶ìœ¼ì‹œêµ°ìš”!"
    },
    story: {
        emoji: "ğŸ“–",
        title: "ì „ëµê°€",
        desc: "ê¹Šì´ìˆëŠ” ìŠ¤í† ë¦¬ì™€ ì „ëµì´ í•„ìš”í•˜ì‹œêµ°ìš”!"
    },
    relax: {
        emoji: "â˜•",
        title: "íë§ ë§ˆìŠ¤í„°",
        desc: "í¸ì•ˆí•œ íœ´ì‹ì´ í•„ìš”í•œ ì‹œê°„ì´ë„¤ìš”!"
    }
};

const GENRE_TRANSLATIONS = {
    "Action": "ì•¡ì…˜",
    "Indie": "ì¸ë””",
    "Adventure": "ì–´ë“œë²¤ì²˜",
    "RPG": "ë¡¤í”Œë ˆì‰",
    "Strategy": "ì „ëµ",
    "Shooter": "ìŠˆíŒ…",
    "Puzzle": "í¼ì¦",
    "Simulation": "ì‹œë®¬ë ˆì´ì…˜",
    "Platformer": "í”Œë«í¼",
    "Casual": "ìºì£¼ì–¼",
    "Arcade": "ì•„ì¼€ì´ë“œ",
    "Fighting": "ê²©íˆ¬",
    "Family": "ê°€ì¡±",
    "Racing": "ë ˆì´ì‹±",
    "Sports": "ìŠ¤í¬ì¸ "
};

const PLATFORM_ICONS = {
    "PC": "ğŸ’»",
    "PlayStation": "ğŸ®",
    "Xbox": "ğŸ®",
    "Nintendo": "ğŸ®",
    "iOS": "ğŸ“±",
    "Android": "ğŸ“±",
    "Mac": "ğŸ’»"
};

function updateStatus(message, type = 'info') {
    const statusEl = document.getElementById('status-message');
    statusEl.textContent = message;
    statusEl.className = type;
}

function useFallbackData() {
    console.log('ëŒ€ì²´ ë°ì´í„° ì‚¬ìš©');
    ALL_GAMES = [
        {
            name: "The Witcher 3: Wild Hunt",
            genres: [{name: "RPG"}, {name: "Action"}],
            rating: 4.66,
            background_image: "https://media.rawg.io/media/games/618/618c2031a07bbff6b4f611f10b6bcdbc.jpg",
            platforms: [{platform: {name: "PC"}}, {platform: {name: "PlayStation 4"}}],
            released: "2015-05-18"
        },
        {
            name: "Portal 2",
            genres: [{name: "Puzzle"}, {name: "Platformer"}],
            rating: 4.62,
            background_image: "https://media.rawg.io/media/games/328/3283617cb7d75d67257fc58339188742.jpg",
            platforms: [{platform: {name: "PC"}}],
            released: "2011-04-18"
        },
        {
            name: "Stardew Valley",
            genres: [{name: "Simulation"}, {name: "Casual"}],
            rating: 4.44,
            background_image: "https://media.rawg.io/media/games/713/713269608dc8f2f40f5a670a14b2de94.jpg",
            platforms: [{platform: {name: "PC"}}, {platform: {name: "Nintendo Switch"}}],
            released: "2016-02-26"
        },
        {
            name: "Counter-Strike: Global Offensive",
            genres: [{name: "Action"}, {name: "Shooter"}],
            rating: 4.48,
            background_image: "https://media.rawg.io/media/games/736/73619bd336c894d6941d926bfd563946.jpg",
            platforms: [{platform: {name: "PC"}}],
            released: "2012-08-21"
        },
        {
            name: "Terraria",
            genres: [{name: "Adventure"}, {name: "Platformer"}],
            rating: 4.41,
            background_image: "https://media.rawg.io/media/games/f46/f466571d536f2e3ea9e815ad17177501.jpg",
            platforms: [{platform: {name: "PC"}}],
            released: "2011-05-16"
        },
        {
            name: "Civilization VI",
            genres: [{name: "Strategy"}, {name: "RPG"}],
            rating: 4.35,
            background_image: "https://media.rawg.io/media/games/0e5/0e5e869f2e8f496b3f09e00187ea94fc.jpg",
            platforms: [{platform: {name: "PC"}}],
            released: "2016-10-21"
        }
    ];
    
    isLoading = false;
    updateStatus('âš ï¸ í…ŒìŠ¤íŠ¸ ëª¨ë“œë¡œ ì‹¤í–‰ ì¤‘ì…ë‹ˆë‹¤. ì„¤ë¬¸ì„ ì™„ë£Œí•˜ê³  ì¶”ì²œ ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”', 'info');
    document.getElementById('recommend-btn').disabled = false;
}

function loadGames() {
    updateStatus('ê²Œì„ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...', 'info');
    
    fetch(RAWG_URL)
        .then(res => {
            if (!res.ok) throw new Error('API ì‘ë‹µ ì˜¤ë¥˜');
            return res.json();
        })
        .then(data => {
            ALL_GAMES = data.results || [];
            
            if (ALL_GAMES.length === 0) {
                throw new Error('ê²Œì„ ë°ì´í„°ê°€ ë¹„ì–´ìˆìŠµë‹ˆë‹¤');
            }
            
            isLoading = false;
            updateStatus('ì„¤ë¬¸ì„ ì™„ë£Œí•˜ê³  ì¶”ì²œ ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”', 'info');
            document.getElementById('recommend-btn').disabled = false;
            console.log(`${ALL_GAMES.length}ê°œì˜ ê²Œì„ ë¡œë”© ì™„ë£Œ`);
        })
        .catch(err => {
            console.error("API ë¡œë”© ì‹¤íŒ¨:", err);
            useFallbackData();
        });
}

function calculateMood() {
    const scores = {
        action: parseInt(document.querySelector('input[name="q1"]:checked')?.value || 0),
        adventure: parseInt(document.querySelector('input[name="q2"]:checked')?.value || 0),
        story: parseInt(document.querySelector('input[name="q3"]:checked')?.value || 0),
        relax: parseInt(document.querySelector('input[name="q4"]:checked')?.value || 0)
    };

    let maxMood = "action";
    let maxScore = scores.action;
    
    for (let mood in scores) {
        if (scores[mood] > maxScore) {
            maxMood = mood;
            maxScore = scores[mood];
        }
    }
    
    console.log("ì„¤ë¬¸ ì ìˆ˜:", scores, "â†’ ì„ íƒëœ mood:", maxMood);
    return maxMood;
}

function recommendGame() {
    if (isLoading || ALL_GAMES.length === 0) {
        updateStatus('ê²Œì„ ë°ì´í„°ë¥¼ ì•„ì§ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ì…ë‹ˆë‹¤. ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”.', 'error');
        return;
    }

    const mood = calculateMood();
    const targetGenres = MOOD_TO_GENRES[mood];
    const moodInfo = MOOD_DESCRIPTIONS[mood];
    
    updateStatus(`${moodInfo.emoji} ë‹¹ì‹ ì€ ${moodInfo.title}! ${moodInfo.desc}`, 'info');

    const filteredGames = ALL_GAMES
        .filter(g => Array.isArray(g.genres) && g.genres.length > 0)
        .filter(g => g.genres.some(gg => 
            targetGenres.some(tg => tg.toLowerCase() === gg.name.toLowerCase())
        ))
        .filter(g => g.rating >= 3.5)
        .filter(g => !RECOMMENDED_GAMES.includes(g.name)); // ì´ë¯¸ ì¶”ì²œí•œ ê²Œì„ ì œì™¸

    console.log(`${targetGenres.join(', ')} ì¥ë¥´ì—ì„œ ${filteredGames.length}ê°œ ê²Œì„ ë°œê²¬`);

    if (filteredGames.length === 0) {
        // ì¶”ì²œí•  ê²Œì„ì´ ì—†ìœ¼ë©´ ëª©ë¡ ì´ˆê¸°í™”
        RECOMMENDED_GAMES = [];
        const translatedGenres = targetGenres.map(g => GENRE_TRANSLATIONS[g] || g).join(", ");
        updateStatus(`ëª¨ë“  [${translatedGenres}] ì¥ë¥´ ê²Œì„ì„ ì¶”ì²œí–ˆìŠµë‹ˆë‹¤! ì²˜ìŒë¶€í„° ë‹¤ì‹œ ì¶”ì²œë°›ìœ¼ì‹œê² ì–´ìš”?`, 'info');
        document.getElementById('result-area').classList.add('hidden');
        return;
    }

    const selectedGame = filteredGames[Math.floor(Math.random() * filteredGames.length)];
    RECOMMENDED_GAMES.push(selectedGame.name); // ì¶”ì²œí•œ ê²Œì„ ëª©ë¡ì— ì¶”ê°€
    displayRecommendation(selectedGame, targetGenres);
}

function displayRecommendation(game, genres) {
    const resultArea = document.getElementById('result-area');
    const title = game.name;
    const genreStr = Array.isArray(game.genres) 
        ? game.genres.map(g => GENRE_TRANSLATIONS[g.name] || g.name).join(', ') 
        : 'ì¥ë¥´ ì •ë³´ ì—†ìŒ';
    
    const imgUrl = game.background_image || 'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="300" height="180"%3E%3Crect fill="%23ddd" width="300" height="180"/%3E%3Ctext x="50%25" y="50%25" text-anchor="middle" dy=".3em" fill="%23999"%3Eì´ë¯¸ì§€ ì—†ìŒ%3C/text%3E%3C/svg%3E';
    
    const rating = game.rating ? game.rating.toFixed(1) : 'N/A';
    
    const platforms = game.platforms 
        ? game.platforms.slice(0, 4).map(p => {
            const platformName = p.platform.name;
            for (let key in PLATFORM_ICONS) {
                if (platformName.includes(key)) {
                    return `<span class="platform-tag">${PLATFORM_ICONS[key]} ${platformName}</span>`;
                }
            }
            return `<span class="platform-tag">${platformName}</span>`;
        }).join('')
        : '';

    const retryButton = '<button onclick="recommendGame()" style="margin-top:15px;padding:10px 20px;background:linear-gradient(135deg,rgba(157,78,221,0.8) 0%,rgba(114,9,183,0.8) 100%);color:white;border:2px solid rgba(199,125,255,0.5);border-radius:20px;cursor:pointer;font-size:0.9rem;transition:all 0.3s;box-shadow:0 4px 20px rgba(157,78,221,0.4);" onmouseover="this.style.transform=\'scale(1.05)\';this.style.boxShadow=\'0 6px 30px rgba(157,78,221,0.6)\'" onmouseout="this.style.transform=\'scale(1)\';this.style.boxShadow=\'0 4px 20px rgba(157,78,221,0.4)\'">ğŸ² ë‹¤ë¥¸ ê²Œì„ ì¶”ì²œë°›ê¸°</button>';

    resultArea.classList.remove('hidden');
    resultArea.innerHTML = `
        <div class="game-thumbnail">
            <img src="${imgUrl}" alt="${title}" onerror="this.style.display='none'">
        </div>
        <div class="game-info">
            <h2>ğŸ‰ ${title}</h2>
            <div class="rating">â­ ${rating} / 5.0</div>
            <p><strong>ì¥ë¥´:</strong> ${genreStr}</p>
            ${platforms ? `<div class="platforms">${platforms}</div>` : ''}
            <p style="color:#666; font-size:0.9rem; margin-top:15px;">
                ${game.released ? `ì¶œì‹œì¼: ${game.released}` : ''}
            </p>
            ${retryButton}
        </div>
    `;

    const mood = calculateMood();
    const moodInfo = MOOD_DESCRIPTIONS[mood];
    const translatedGenres = genres.map(g => GENRE_TRANSLATIONS[g] || g).join(", ");
    updateStatus(`${moodInfo.emoji} ${moodInfo.title}ë‹˜ì„ ìœ„í•œ [${translatedGenres}] ê²Œì„ì…ë‹ˆë‹¤! ğŸ®`, 'info');
    
    resultArea.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
}

document.addEventListener('DOMContentLoaded', () => {
    loadGames();
    document.getElementById('recommend-btn').addEventListener('click', recommendGame);
});
    </script>
</body>
</html>